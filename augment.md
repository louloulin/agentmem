# AgentMem: æ™ºèƒ½è®°å¿†å¹³å°æ¶æ„åˆ†æ

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

AgentMem æ˜¯ä¸€ä¸ªåŸºäº Rust çš„ç°ä»£åŒ–æ™ºèƒ½è®°å¿†å¹³å°ï¼Œæ—¨åœ¨ä¸º AI ä»£ç†æä¾›å¼ºå¤§çš„è®°å¿†ç®¡ç†ã€å­˜å‚¨å’Œæ£€ç´¢èƒ½åŠ›ã€‚è¯¥é¡¹ç›®é‡‡ç”¨æ¨¡å—åŒ–æ¶æ„ï¼Œæ”¯æŒå¤šç§å­˜å‚¨åç«¯ã€LLM æä¾›å•†å’Œæ™ºèƒ½å¤„ç†èƒ½åŠ›ã€‚

### æ ¸å¿ƒç‰¹æ€§
- ğŸ§  **æ™ºèƒ½è®°å¿†å¤„ç†**: äº‹å®æå–ã€é‡è¦æ€§è¯„ä¼°ã€å†³ç­–å¼•æ“
- ğŸ”„ **å¤šæ¨¡æ€æ”¯æŒ**: æ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘å†…å®¹å¤„ç†
- ğŸ—„ï¸ **å¤šå­˜å‚¨åç«¯**: 8ä¸ªå‘é‡æ•°æ®åº“ + 2ä¸ªå›¾æ•°æ®åº“
- ğŸ¤– **ä¸°å¯ŒLLMç”Ÿæ€**: 15+ä¸ªLLMæä¾›å•†æ”¯æŒ
- ğŸ“Š **é«˜çº§åˆ†æ**: èšç±»ã€æ¨ç†ã€å…³è”åˆ†æ
- ğŸŒ **åˆ†å¸ƒå¼æ¶æ„**: é›†ç¾¤ç®¡ç†ã€åˆ†ç‰‡ã€å¤åˆ¶
- ğŸ“ˆ **æ€§èƒ½ä¼˜åŒ–**: å®Œæ•´çš„é¥æµ‹å’Œè‡ªé€‚åº”ä¼˜åŒ–ç³»ç»Ÿ

## ğŸ—ï¸ æ•´ä½“æ¶æ„

### åˆ†å±‚æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åº”ç”¨å±‚ (Application Layer)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  agent-mem-server  â”‚  agent-mem-client  â”‚  agent-mem-compat â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    ä¸šåŠ¡é€»è¾‘å±‚ (Business Layer)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ agent-mem-intelligence â”‚ agent-mem-performance â”‚ agent-mem-core â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    æœåŠ¡å±‚ (Service Layer)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  agent-mem-llm  â”‚  agent-mem-embeddings  â”‚ agent-mem-distributed â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    æ•°æ®å±‚ (Data Layer)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        agent-mem-storage        â”‚        agent-mem-config    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    åŸºç¡€è®¾æ–½å±‚ (Infrastructure)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        agent-mem-traits         â”‚        agent-mem-utils     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæ¨¡å—èŒè´£

#### ğŸ§  æ™ºèƒ½å¤„ç†å±‚ (Intelligence Layer)
- **agent-mem-intelligence**: æ ¸å¿ƒæ™ºèƒ½èƒ½åŠ›
  - äº‹å®æå–å’ŒéªŒè¯
  - é‡è¦æ€§è¯„ä¼°ç®—æ³•
  - å†³ç­–å¼•æ“
  - å¤šæ¨¡æ€å†…å®¹å¤„ç†
  - èšç±»å’Œæ¨ç†åˆ†æ

#### ğŸ“Š æ€§èƒ½ä¼˜åŒ–å±‚ (Performance Layer)
- **agent-mem-performance**: æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–
  - é¥æµ‹ç³»ç»Ÿ (TelemetrySystem)
  - äº‹ä»¶è¿½è¸ª (EventTracker)
  - æ€§èƒ½ç›‘æ§ (PerformanceMonitor)
  - è‡ªé€‚åº”ä¼˜åŒ– (AdaptiveOptimizer)
  - å†…å­˜æ± ç®¡ç†

#### ğŸ—„ï¸ å­˜å‚¨æŠ½è±¡å±‚ (Storage Layer)
- **agent-mem-storage**: ç»Ÿä¸€å­˜å‚¨æ¥å£
  - å‘é‡æ•°æ®åº“: Pinecone, Qdrant, Chroma, Weaviate, Milvus, LanceDB, Elasticsearch
  - å›¾æ•°æ®åº“: Neo4j, Memgraph
  - å†…å­˜å­˜å‚¨: é«˜æ€§èƒ½æœ¬åœ°ç¼“å­˜

#### ğŸ¤– LLM é›†æˆå±‚ (LLM Layer)
- **agent-mem-llm**: LLM æä¾›å•†é›†æˆ
  - OpenAI, Anthropic, Claude, Cohere, Mistral
  - Azure OpenAI, Google Gemini, Perplexity
  - Ollama, DeepSeek, LiteLLM
  - ç»Ÿä¸€çš„æç¤ºç®¡ç†ç³»ç»Ÿ

## ğŸ”§ æ ¸å¿ƒè®¾è®¡æ¨¡å¼

### 1. ç­–ç•¥æ¨¡å¼ (Strategy Pattern)
```rust
// å­˜å‚¨ç­–ç•¥æŠ½è±¡
pub trait VectorStore: Send + Sync {
    async fn add_vectors(&self, vectors: Vec<VectorData>) -> Result<()>;
    async fn search_vectors(&self, query: &Vector, limit: usize) -> Result<Vec<SearchResult>>;
}

// LLM æä¾›å•†ç­–ç•¥
pub trait LLMProvider: Send + Sync {
    async fn generate(&self, messages: &[Message]) -> Result<String>;
    fn get_model_info(&self) -> ModelInfo;
}
```

### 2. å·¥å‚æ¨¡å¼ (Factory Pattern)
```rust
// å­˜å‚¨å·¥å‚
pub struct StorageFactory;
impl StorageFactory {
    pub fn create_vector_store(config: &VectorStoreConfig) -> Result<Box<dyn VectorStore>> {
        match config.provider {
            Provider::Pinecone => Ok(Box::new(PineconeStore::new(config)?)),
            Provider::Qdrant => Ok(Box::new(QdrantStore::new(config)?)),
            // ... å…¶ä»–æä¾›å•†
        }
    }
}
```

### 3. è§‚å¯Ÿè€…æ¨¡å¼ (Observer Pattern)
```rust
// äº‹ä»¶ç³»ç»Ÿ
pub struct EventTracker {
    listeners: Vec<Box<dyn EventListener>>,
}

pub trait EventListener: Send + Sync {
    async fn on_event(&self, event: &MemoryEvent);
}
```

### 4. é€‚é…å™¨æ¨¡å¼ (Adapter Pattern)
```rust
// Mem0 å…¼å®¹å±‚
pub struct Mem0Adapter {
    core_manager: Arc<MemoryManager>,
}

impl Mem0Adapter {
    pub async fn add(&self, messages: Vec<Message>, user_id: &str) -> Result<String> {
        // é€‚é… Mem0 API åˆ°å†…éƒ¨å®ç°
        self.core_manager.add_memory(/* ... */).await
    }
}
```

## ğŸ“Š æ•°æ®æµæ¶æ„

### è®°å¿†æ·»åŠ æµç¨‹
```
ç”¨æˆ·è¯·æ±‚ â†’ æœåŠ¡å™¨è·¯ç”± â†’ å†…å®¹é¢„å¤„ç† â†’ æ™ºèƒ½åˆ†æ
    â†“
äº‹å®æå– â†’ é‡è¦æ€§è¯„ä¼° â†’ å‘é‡åŒ– â†’ å­˜å‚¨åˆ†å‘
    â†“
äº‹ä»¶è¿½è¸ª â†’ æ€§èƒ½ç›‘æ§ â†’ å“åº”è¿”å›
```

### è®°å¿†æ£€ç´¢æµç¨‹
```
æŸ¥è¯¢è¯·æ±‚ â†’ æŸ¥è¯¢ä¼˜åŒ– â†’ å¤šå­˜å‚¨å¹¶è¡Œæœç´¢
    â†“
ç»“æœèšåˆ â†’ ç›¸ä¼¼åº¦è®¡ç®— â†’ é‡æ’åº
    â†“
æ™ºèƒ½æ¨ç† â†’ å…³è”åˆ†æ â†’ ç»“æœè¿”å›
```

## ğŸš€ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 1. é¥æµ‹ç³»ç»Ÿæ¶æ„
```rust
pub struct TelemetrySystem {
    event_tracker: Arc<EventTracker>,
    performance_monitor: Arc<PerformanceMonitor>,
    adaptive_optimizer: Arc<AdaptiveOptimizer>,
}
```

**æ ¸å¿ƒåŠŸèƒ½**:
- **äº‹ä»¶è¿½è¸ª**: è®°å½•æ‰€æœ‰å†…å­˜æ“ä½œäº‹ä»¶
- **æ€§èƒ½ç›‘æ§**: å®æ—¶ç›‘æ§ç³»ç»Ÿèµ„æºä½¿ç”¨
- **è‡ªé€‚åº”ä¼˜åŒ–**: åŸºäºæ€§èƒ½æ•°æ®è‡ªåŠ¨è°ƒä¼˜

### 2. ç¼“å­˜ç­–ç•¥
- **å¤šçº§ç¼“å­˜**: L1(å†…å­˜) â†’ L2(Redis) â†’ L3(æŒä¹…åŒ–)
- **æ™ºèƒ½é¢„å–**: åŸºäºè®¿é—®æ¨¡å¼é¢„åŠ è½½æ•°æ®
- **LRUæ·˜æ±°**: æœ€è¿‘æœ€å°‘ä½¿ç”¨ç®—æ³•

### 3. å¹¶å‘ä¼˜åŒ–
- **å¼‚æ­¥å¤„ç†**: å…¨é¢ä½¿ç”¨ Tokio å¼‚æ­¥è¿è¡Œæ—¶
- **è¿æ¥æ± **: æ•°æ®åº“è¿æ¥å¤ç”¨
- **æ‰¹å¤„ç†**: æ‰¹é‡æ“ä½œå‡å°‘ç½‘ç»œå¼€é”€

## ğŸ”’ å®‰å…¨è®¾è®¡

### 1. è®¤è¯æˆæƒ
```rust
pub struct AuthManager {
    jwt_secret: String,
    token_expiry: Duration,
}

// JWT Token éªŒè¯
pub async fn verify_token(token: &str) -> Result<Claims>;
```

### 2. æ•°æ®åŠ å¯†
- **ä¼ è¾“åŠ å¯†**: TLS 1.3
- **å­˜å‚¨åŠ å¯†**: AES-256
- **å¯†é’¥ç®¡ç†**: ç¯å¢ƒå˜é‡ + å¯†é’¥è½®æ¢

### 3. è®¿é—®æ§åˆ¶
- **åŸºäºè§’è‰²**: Admin, User, ReadOnly
- **èµ„æºéš”ç¦»**: ç”¨æˆ·æ•°æ®éš”ç¦»
- **å®¡è®¡æ—¥å¿—**: å®Œæ•´æ“ä½œè®°å½•

## ğŸŒ åˆ†å¸ƒå¼æ¶æ„

### 1. é›†ç¾¤ç®¡ç†
```rust
pub struct ClusterManager {
    nodes: Arc<RwLock<HashMap<Uuid, NodeInfo>>>,
    consensus: Arc<ConsensusManager>,
}
```

### 2. æ•°æ®åˆ†ç‰‡
- **ä¸€è‡´æ€§å“ˆå¸Œ**: æ•°æ®å‡åŒ€åˆ†å¸ƒ
- **å‰¯æœ¬ç­–ç•¥**: 3å‰¯æœ¬ä¿è¯å¯ç”¨æ€§
- **æ•…éšœè½¬ç§»**: è‡ªåŠ¨æ•…éšœæ£€æµ‹å’Œæ¢å¤

### 3. è´Ÿè½½å‡è¡¡
- **è½®è¯¢ç®—æ³•**: è¯·æ±‚å‡åŒ€åˆ†å‘
- **å¥åº·æ£€æŸ¥**: èŠ‚ç‚¹çŠ¶æ€ç›‘æ§
- **åŠ¨æ€æ‰©ç¼©å®¹**: åŸºäºè´Ÿè½½è‡ªåŠ¨è°ƒæ•´

## ğŸ“ˆ ç›‘æ§å’Œå¯è§‚æµ‹æ€§

### 1. æŒ‡æ ‡æ”¶é›†
```rust
pub struct MetricsCollector {
    request_counter: Counter,
    response_time: Histogram,
    error_rate: Gauge,
}
```

### 2. æ—¥å¿—ç³»ç»Ÿ
- **ç»“æ„åŒ–æ—¥å¿—**: JSON æ ¼å¼
- **æ—¥å¿—çº§åˆ«**: ERROR, WARN, INFO, DEBUG, TRACE
- **åˆ†å¸ƒå¼è¿½è¸ª**: è¯·æ±‚é“¾è·¯è·Ÿè¸ª

### 3. å¥åº·æ£€æŸ¥
- **å­˜æ´»æ£€æŸ¥**: /health/live
- **å°±ç»ªæ£€æŸ¥**: /health/ready
- **ä¾èµ–æ£€æŸ¥**: æ•°æ®åº“è¿æ¥çŠ¶æ€

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### æµ‹è¯•è¦†ç›–ç‡
- **å•å…ƒæµ‹è¯•**: 399ä¸ªæµ‹è¯•ç”¨ä¾‹
- **é›†æˆæµ‹è¯•**: ç«¯åˆ°ç«¯æµç¨‹éªŒè¯
- **æ€§èƒ½æµ‹è¯•**: å‹åŠ›å’Œè´Ÿè½½æµ‹è¯•
- **å®‰å…¨æµ‹è¯•**: æ¼æ´æ‰«æå’Œæ¸—é€æµ‹è¯•

### æµ‹è¯•å·¥å…·
- **Cargo Test**: Rust åŸç”Ÿæµ‹è¯•æ¡†æ¶
- **Tokio Test**: å¼‚æ­¥æµ‹è¯•æ”¯æŒ
- **Mock**: ä¾èµ–æ¨¡æ‹Ÿå’Œéš”ç¦»æµ‹è¯•

## ğŸ”„ CI/CD æµç¨‹

### æŒç»­é›†æˆ
1. **ä»£ç æ£€æŸ¥**: Clippy + Rustfmt
2. **å®‰å…¨æ‰«æ**: Cargo Audit
3. **æµ‹è¯•æ‰§è¡Œ**: å…¨é‡æµ‹è¯•å¥—ä»¶
4. **æ„å»ºéªŒè¯**: å¤šå¹³å°ç¼–è¯‘

### æŒç»­éƒ¨ç½²
1. **é•œåƒæ„å»º**: Docker å¤šé˜¶æ®µæ„å»º
2. **å®‰å…¨æ‰«æ**: å®¹å™¨é•œåƒæ¼æ´æ‰«æ
3. **éƒ¨ç½²ç­–ç•¥**: è“ç»¿éƒ¨ç½²
4. **å›æ»šæœºåˆ¶**: è‡ªåŠ¨å›æ»šå’Œæ‰‹åŠ¨å›æ»š

## ğŸ“š æŠ€æœ¯æ ˆæ€»ç»“

### æ ¸å¿ƒæŠ€æœ¯
- **è¯­è¨€**: Rust 1.70+
- **å¼‚æ­¥è¿è¡Œæ—¶**: Tokio
- **Webæ¡†æ¶**: Axum
- **åºåˆ—åŒ–**: Serde
- **æ—¥å¿—**: Tracing

### å­˜å‚¨æŠ€æœ¯
- **å‘é‡æ•°æ®åº“**: Pinecone, Qdrant, Chroma, Weaviate, Milvus, LanceDB, Elasticsearch
- **å›¾æ•°æ®åº“**: Neo4j, Memgraph
- **ç¼“å­˜**: Redis, å†…å­˜ç¼“å­˜

### AI/ML æŠ€æœ¯
- **LLMé›†æˆ**: OpenAI, Anthropic, Claude, Cohere, Mistralç­‰
- **å‘é‡åŒ–**: OpenAI Embeddings, Cohere Embeddings
- **æ™ºèƒ½å¤„ç†**: è‡ªç„¶è¯­è¨€å¤„ç†, å¤šæ¨¡æ€åˆ†æ

## ğŸ¯ æœªæ¥å‘å±•æ–¹å‘

### çŸ­æœŸç›®æ ‡ (3-6ä¸ªæœˆ)
- [ ] GraphQL API æ”¯æŒ
- [ ] å®æ—¶æµå¤„ç†èƒ½åŠ›
- [ ] æ›´å¤š LLM æä¾›å•†é›†æˆ
- [ ] ç§»åŠ¨ç«¯ SDK

### ä¸­æœŸç›®æ ‡ (6-12ä¸ªæœˆ)
- [ ] è”é‚¦å­¦ä¹ æ”¯æŒ
- [ ] è¾¹ç¼˜è®¡ç®—éƒ¨ç½²
- [ ] å¤šç§Ÿæˆ·æ¶æ„
- [ ] é«˜çº§åˆ†æä»ªè¡¨æ¿

### é•¿æœŸç›®æ ‡ (1-2å¹´)
- [ ] è‡ªä¸»å­¦ä¹ èƒ½åŠ›
- [ ] è·¨æ¨¡æ€æ¨ç†
- [ ] é‡å­è®¡ç®—é›†æˆ
- [ ] å»ä¸­å¿ƒåŒ–å­˜å‚¨

---

**AgentMem** ä»£è¡¨äº†ç°ä»£æ™ºèƒ½è®°å¿†å¹³å°çš„æœ€ä½³å®è·µï¼Œç»“åˆäº† Rust çš„æ€§èƒ½ä¼˜åŠ¿ã€ç°ä»£æ¶æ„è®¾è®¡æ¨¡å¼å’Œ AI æŠ€æœ¯çš„æœ€æ–°å‘å±•ã€‚è¯¥é¡¹ç›®ä¸ä»…æä¾›äº†å¼ºå¤§çš„åŠŸèƒ½ï¼Œè¿˜ç¡®ä¿äº†é«˜æ€§èƒ½ã€é«˜å¯ç”¨æ€§å’Œå¯æ‰©å±•æ€§ã€‚
