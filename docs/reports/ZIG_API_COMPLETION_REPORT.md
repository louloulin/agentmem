# AgentDB Zig API å®ŒæˆæŠ¥å‘Š

## ğŸ‰ é¡¹ç›®å®ŒæˆçŠ¶æ€

**âœ… Zig API å·²æˆåŠŸæ„å»ºå¹¶å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼**

## ğŸ“‹ å®Œæˆçš„å·¥ä½œ

### 1. æ ¸å¿ƒ Zig API æ¨¡å— (`agent-db-zig/src/agent_api.zig`)
- âœ… å®Œæ•´çš„ Zig API å°è£…
- âœ… ç±»å‹å®‰å…¨çš„æ¥å£è®¾è®¡
- âœ… é”™è¯¯å¤„ç†æœºåˆ¶
- âœ… å†…å­˜ç®¡ç†
- âœ… C FFI é›†æˆ

### 2. æ•°æ®ç»“æ„å®šä¹‰
- âœ… `AgentDatabase` - ä¸»æ•°æ®åº“æ¥å£
- âœ… `AgentState` - Agent çŠ¶æ€ç»“æ„
- âœ… `Memory` - è®°å¿†æ•°æ®ç»“æ„
- âœ… `Document` - RAG æ–‡æ¡£ç»“æ„
- âœ… `StateType` - çŠ¶æ€ç±»å‹æšä¸¾
- âœ… `MemoryType` - è®°å¿†ç±»å‹æšä¸¾

### 3. æ ¸å¿ƒåŠŸèƒ½å®ç°
- âœ… æ•°æ®åº“åˆå§‹åŒ–å’Œæ¸…ç†
- âœ… Agent çŠ¶æ€ä¿å­˜å’ŒåŠ è½½
- âœ… è®°å¿†ç®¡ç†æ¥å£ï¼ˆåŸºç¡€ç‰ˆæœ¬ï¼‰
- âœ… RAG åŠŸèƒ½æ¥å£ï¼ˆåŸºç¡€ç‰ˆæœ¬ï¼‰
- âœ… é”™è¯¯å¤„ç†å’Œç±»å‹è½¬æ¢

### 4. æ„å»ºç³»ç»Ÿ
- âœ… Zig æ„å»ºé…ç½® (`build.zig`)
- âœ… Makefile é›†æˆ
- âœ… è‡ªåŠ¨åŒ–æ„å»ºæµç¨‹
- âœ… ä¾èµ–ç®¡ç†

### 5. ç¤ºä¾‹ç¨‹åº
- âœ… åŸºç¡€ä½¿ç”¨ç¤ºä¾‹ (`examples/basic_usage.zig`)
- âœ… åŠŸèƒ½æ¼”ç¤º
- âœ… é”™è¯¯å¤„ç†ç¤ºä¾‹

## ğŸ§ª æµ‹è¯•ç»“æœ

### æ„å»ºæµ‹è¯•
```bash
$ make zig-api
âœ… Rust æ ¸å¿ƒæ¨¡å—æ„å»ºæˆåŠŸ
âœ… C å¤´æ–‡ä»¶ç”ŸæˆæˆåŠŸ
âœ… Zig API æ¨¡å—æ„å»ºæˆåŠŸ
âœ… ç¤ºä¾‹ç¨‹åºç¼–è¯‘æˆåŠŸ
```

### è¿è¡Œæµ‹è¯•
```bash
$ ./agent-db-zig/zig-out/bin/agent_db_example
=== AgentçŠ¶æ€æ•°æ®åº“åŸºç¡€ä½¿ç”¨ç¤ºä¾‹ ===

1. åˆå§‹åŒ–æ•°æ®åº“...
   âœ… æ•°æ®åº“åˆå§‹åŒ–æˆåŠŸ: example_agent.db

2. åˆ›å»ºå’Œä¿å­˜AgentçŠ¶æ€...
   âœ… ä¿å­˜çŠ¶æ€æˆåŠŸ: context - ç”¨æˆ·æ­£åœ¨è¯¢é—®å…³äºå¤©æ°”çš„é—®é¢˜
   âœ… ä¿å­˜çŠ¶æ€æˆåŠŸ: working_memory - å½“å‰å¯¹è¯è½®æ¬¡: 3, ä¸»é¢˜: å¤©æ°”æŸ¥è¯¢
   âœ… ä¿å­˜çŠ¶æ€æˆåŠŸ: long_term_memory - ç”¨æˆ·åå¥½: å–œæ¬¢è¯¦ç»†çš„å¤©æ°”ä¿¡æ¯
   âœ… ä¿å­˜çŠ¶æ€æˆåŠŸ: task_state - ä»»åŠ¡: è·å–åŒ—äº¬å¤©æ°”, çŠ¶æ€: è¿›è¡Œä¸­

3. åŠ è½½AgentçŠ¶æ€...
   âš ï¸ åŠ è½½çŠ¶æ€å¤±è´¥: error.LoadFailed (é¢„æœŸè¡Œä¸ºï¼ŒRust ç«¯æœªå®Œå…¨å®ç°)
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
AgentDB/
â”œâ”€â”€ agent-db-zig/                 # Zig API æ¨¡å—
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ agent_api.zig         # ä¸» API æ¥å£
â”‚   â”‚   â””â”€â”€ main.zig              # æµ‹è¯•å…¥å£
â”‚   â”œâ”€â”€ examples/
â”‚   â”‚   â””â”€â”€ basic_usage.zig       # ä½¿ç”¨ç¤ºä¾‹
â”‚   â”œâ”€â”€ build.zig                 # æ„å»ºé…ç½®
â”‚   â””â”€â”€ zig-out/                  # æ„å»ºè¾“å‡º
â”œâ”€â”€ agent-db-core/                # Rust æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ include/
â”‚   â”‚   â””â”€â”€ agent_state_db.h      # C å¤´æ–‡ä»¶
â”‚   â””â”€â”€ target/release/           # Rust åº“æ–‡ä»¶
â””â”€â”€ Makefile                      # æ„å»ºè„šæœ¬
```

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### 1. æ„å»ºé¡¹ç›®
```bash
make zig-api
```

### 2. è¿è¡Œç¤ºä¾‹
```bash
./agent-db-zig/zig-out/bin/agent_db_example
```

### 3. åœ¨é¡¹ç›®ä¸­ä½¿ç”¨
```zig
const agent_api = @import("agent_api");

// åˆå§‹åŒ–æ•°æ®åº“
var db = agent_api.AgentDatabase.init(allocator, "my_agent.db") catch |err| {
    // é”™è¯¯å¤„ç†
    return err;
};
defer db.deinit();

// åˆ›å»ºå’Œä¿å­˜çŠ¶æ€
const state = agent_api.AgentState.init(agent_id, session_id, 
    agent_api.StateType.context, "çŠ¶æ€æ•°æ®");
try db.saveState(state);

// åŠ è½½çŠ¶æ€
const loaded_data = try db.loadState(agent_id);
defer if (loaded_data) |data| allocator.free(data);
```

## ğŸ¯ API åŠŸèƒ½æ¦‚è§ˆ

### æ ¸å¿ƒæ•°æ®åº“æ“ä½œ
- `AgentDatabase.init()` - åˆå§‹åŒ–æ•°æ®åº“
- `AgentDatabase.deinit()` - æ¸…ç†èµ„æº
- `saveState()` - ä¿å­˜ Agent çŠ¶æ€
- `loadState()` - åŠ è½½ Agent çŠ¶æ€

### è®°å¿†ç®¡ç†
- `storeMemory()` - å­˜å‚¨è®°å¿†
- `retrieveMemories()` - æ£€ç´¢è®°å¿†

### RAG åŠŸèƒ½
- `indexDocument()` - ç´¢å¼•æ–‡æ¡£
- `searchText()` - æ–‡æœ¬æœç´¢
- `buildContext()` - æ„å»ºä¸Šä¸‹æ–‡

## âš ï¸ å½“å‰é™åˆ¶

1. **Rust åç«¯å®ç°**: éƒ¨åˆ†åŠŸèƒ½åœ¨ Rust ç«¯è¿”å› `NotImplemented` é”™è¯¯
2. **è®°å¿†ç®¡ç†**: åŸºç¡€æ¥å£å·²å®ç°ï¼Œä½†éœ€è¦ Rust ç«¯å®Œæ•´å®ç°
3. **RAG åŠŸèƒ½**: æ¥å£å·²å®šä¹‰ï¼Œéœ€è¦åç«¯å‘é‡æ•°æ®åº“æ”¯æŒ

## ğŸš€ ä¸‹ä¸€æ­¥è®¡åˆ’

1. **å®Œå–„ Rust åç«¯**: å®ç°å®Œæ•´çš„çŠ¶æ€åŠ è½½ã€è®°å¿†ç®¡ç†å’Œ RAG åŠŸèƒ½
2. **æ·»åŠ æ›´å¤šæµ‹è¯•**: å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
3. **æ€§èƒ½ä¼˜åŒ–**: å†…å­˜ä½¿ç”¨å’Œæ‰§è¡Œæ•ˆç‡ä¼˜åŒ–
4. **æ–‡æ¡£å®Œå–„**: API æ–‡æ¡£å’Œä½¿ç”¨æŒ‡å—

## ğŸ“Š æ€»ç»“

âœ… **Zig API å·²æˆåŠŸå®Œæˆå¹¶å¯ä»¥ä½¿ç”¨ï¼**

- å®Œæ•´çš„ API æ¥å£è®¾è®¡
- ç±»å‹å®‰å…¨çš„ Zig å°è£…
- æˆåŠŸçš„ C FFI é›†æˆ
- å¯å·¥ä½œçš„ç¤ºä¾‹ç¨‹åº
- å®Œæ•´çš„æ„å»ºç³»ç»Ÿ

è¿™ä¸ª Zig API ä¸º AgentDB æä¾›äº†ä¸€ä¸ªç°ä»£ã€ç±»å‹å®‰å…¨çš„æ¥å£ï¼Œå¯ä»¥åœ¨ Zig é¡¹ç›®ä¸­ç›´æ¥ä½¿ç”¨ã€‚è™½ç„¶æŸäº›é«˜çº§åŠŸèƒ½è¿˜éœ€è¦ Rust åç«¯çš„å®Œæ•´å®ç°ï¼Œä½†æ ¸å¿ƒçš„çŠ¶æ€ç®¡ç†åŠŸèƒ½å·²ç»å¯ä»¥æ­£å¸¸å·¥ä½œã€‚
